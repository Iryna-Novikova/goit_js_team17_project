import{a as d,i as H,S as N}from"./assets/vendor-Cg6shDk6.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const n={headerBurger:document.querySelector("[data-menu-open]"),modalHeaderCloseBtn:document.querySelector(".close-menu-btn"),modalHeader:document.querySelector("[data-menu]"),mobileNavLinks:document.querySelector(".mobile-nav-links"),artistsListElm:document.querySelector("[data-artist-gallery]"),loadMoreBtnElm:document.querySelector("[data-btn-load-more]"),artistLoaderElm:document.querySelector("[data-artist-loader]"),artistInfoElm:document.querySelector("[data-artist-info]"),artistsModalBackdrop:document.querySelector("[data-artists-modal]"),artistsModalCloseBtn:document.querySelector(".artists-modal-close-btn"),artistModalLoaderElm:document.querySelector("[data-artist-detail-loader]"),feedbackSliderPrevBtn:document.querySelector(".swiper-button-prev"),feedbackSliderNextBtn:document.querySelector(".swiper-button-next"),feedbackSliderPagination:document.querySelector(".swiper-pagination"),openFeedbackBtn:document.querySelector(".leave-feedback-btn"),feedbackLoaderElm:document.querySelector("[data-feedback-loader]"),feedbackSliderWrapperElm:document.querySelector("[data-feedbackLists]"),feedbackFormBackdrop:document.querySelector("[data-feedback-form]"),feedbackFormEL:document.querySelector(".form-main"),feedbackFormCloseBtn:document.querySelector(".form-main-btn"),feedbackFormRatingContainer:document.querySelector(".form-str"),feedbackFormSubmitBtn:document.querySelector(".form-end-button"),body:document.body};function O(){n.modalHeader.classList.add("is-shown-menu-header"),document.addEventListener("keydown",B),n.modalHeader.addEventListener("click",w),n.modalHeaderCloseBtn.addEventListener("click",m),n.mobileNavLinks.addEventListener("click",D),document.body.classList.add("no-scroll")}function m(){n.modalHeader.classList.remove("is-shown-menu-header"),document.removeEventListener("keydown",B),n.modalHeader.removeEventListener("click",w),n.modalHeaderCloseBtn.removeEventListener("click",m),n.mobileNavLinks.removeEventListener("click",D),document.body.classList.remove("no-scroll")}function B(a){a.key==="Escape"&&m()}function w(a){a.currentTarget===a.target&&m()}function D(a){a.target.tagName==="A"&&m()}n.headerBurger.addEventListener("click",O);const $="/goit_js_team17_project/assets/icons-Dpxc_yEu.svg";function R(a){const{_id:e,strArtist:t,strArtistThumb:r,genres:i=[],strBiographyEN:s}=a,o='<ul class="artists-genres-list">'+i.map(h=>`<li class="artists-genre-item">${h}</li>`).join(" ")+"</ul>",c=s?s.slice(0,60)+"...":"No description available.";return`
    <li class="artists-card">
      <img src="${r}" alt="${t}" class="artist-photo" />
      ${o}
      <h4 class="artists-name epilogue">${t}</h4>
      <p class="artists-description">${c}</p>
      <button class="learn-more-btn" data-id="${e}" type="button">
        <span class="learn-more-text">Learn More</span>
        <svg class="learn-more-icon" viewBox="0 0 31 32" width="24" height="25">
          <use href="${$}#icon-right-caret-learn-more"></use>
        </svg>
      </button>
    </li>
  `}function j(a){const e=a.map(R).join("");n.artistsListElm.insertAdjacentHTML("beforeend",e)}function _(){n.loadMoreBtnElm.classList.remove("visually-hidden")}function b(){n.loadMoreBtnElm.classList.add("visually-hidden")}function Y(){n.feedbackLoaderElm.classList.remove("visually-hidden")}function K(){n.feedbackLoaderElm.classList.add("visually-hidden")}function J(){n.artistLoaderElm.classList.remove("visually-hidden")}function V(){n.artistLoaderElm.classList.add("visually-hidden")}function z(){n.artistModalLoaderElm.classList.remove("visually-hidden")}function G(){n.artistModalLoaderElm.classList.add("visually-hidden")}d.defaults.baseURL="https://sound-wave.b.goit.study/api";async function U(a=1,e=8){const t="/artists",r={limit:e,page:a};return(await d.get(t,{params:r})).data}async function W(a){const e=`/artists/${a}/albums`,t={id:a};return(await d.get(e,{params:t})).data}async function Q({name:a,rating:e,descr:t}){const r="/feedbacks",i={name:a,rating:e,descr:t};return(await d.post(r,i)).data}function X(a){const e=Z(a);n.artistInfoElm.innerHTML=e}function Z(a){const{strArtist:e,strArtistThumb:t,intFormedYear:r,intDiedYear:i,strGender:s,intMembers:o,strCountry:c,strBiographyEN:h,albumsList:A=[],genres:q=[]}=a,T=`
    <ul class="artist-genres-list">
      ${q.map(f=>`<li class="artist-genre-item">${f}</li>`).join(" ")}
    </ul>`,P=A.map(f=>ee(f)).join(" ");let y=r;return y+=i?`-${i}`:"-present",`
    <h5 class="epilogue artist-name">${e}</h5>
    <div class="artist-info">
      <img class="artist-photo-modal" src="${t}" alt="${e} photo" />
      <div class="artist-about">
      <div class="artist-about-part">
        <div class="artist-category-info artist-about-part-left">
          <p class="artist-category-name">Years active</p>
          <p class="artist-category-text">${y}</p>
        </div>
        <div class="artist-category-info">
          <p class="artist-category-name">Sex</p>
          <p class="artist-category-text">${s}</p>
        </div>
      </div>
      <div class="artist-about-part ">
        <div class="artist-category-info artist-about-part-left">
          <p class="artist-category-name">Members</p>
          <p class="artist-category-text">${o}</p>
        </div>
        <div class="artist-category-info">
          <p class="artist-category-name">Country</p>
          <p class="artist-category-text">${c}</p>
        </div>
       </div>
        <div class="biography-box">
        <p class="artist-category-name">Biography</p>
        <p class="artist-category-text-biography">${h}</p>
        </div>
        ${T}
      </div>
    </div>
    <p class="albums-header">Albums</p>
    <ul class="albums-list">${P}</ul>
  `}function ee(a){const{strAlbum:e,tracks:t=[]}=a,r=t.map(i=>te(i)).join("");return`<li>
    <p class="album-name">${e}</p>
    <ul class="tracks-title">
      <li>Track</li>
      <li>Time</li>
      <li>Link</li>
    </ul>
    <ul class="tracks-list">
      ${r}
    </ul>
  </li>`}function te({strTrack:a,intDuration:e,movie:t}){const r=se(e);return`
    <li class="track-item">
      <p class="track-title">${a}</p>
      <p class="track-time">${r}</p>
      <a class="track-movie${t?"":" movie-hidden"}" href="${t||""}" target="_blank" rel="noopener noreferrer">
        <svg class="modal-youtube-icon" width="24px" height="24px">
          <use href="${$}#icon-youtube"></use>
        </svg>
      </a>
    </li>`}function se(a){const r=Math.floor(a/6e4),i=Math.floor(a%6e4/1e3);return r.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")}function ae(){n.body.style.overflow="hidden"}function re(){n.body.style.overflow=""}function C(a){a.key==="Escape"&&v()}function I(a){a.target===n.artistsModalBackdrop&&v()}function x(){v()}function ie(a){n.artistsModalBackdrop.classList.add("is-open"),ae(),document.addEventListener("keydown",C),n.artistsModalBackdrop.addEventListener("click",I),n.artistsModalCloseBtn.addEventListener("click",x),ne(a)}async function ne(a){z();try{const e=await W(a);X(e)}catch{n.artistInfoElm.innerHTML=`
      <p class="error-msg">Artist info failed to load. Please try again later.</p>
    `}finally{G()}}function v(){n.artistsModalBackdrop.classList.remove("is-open"),document.removeEventListener("keydown",C),n.artistsModalBackdrop.removeEventListener("click",I),n.artistsModalCloseBtn.removeEventListener("click",x),n.artistInfoElm.innerHTML="",re()}function u(a,e="topRight"){H.show({title:"",message:a,backgroundColor:"rgb(118, 65, 145)",messageColor:"rgb(255, 255, 255)",position:e})}let p=1;const L=8;let k;F();async function F(){try{b(),J();const a=await U(p,L),e=a.artists,t=a.totalArtists;j(e),k=Math.ceil(t/L),p<k?(_(),p++):b()}catch(a){n.artistsListElm.innerHTML=`Помилка завантаження артистів: ${a}`}V()}function oe(){F()}n.loadMoreBtnElm.addEventListener("click",oe);n.artistsListElm.addEventListener("click",a=>{const e=a.target.closest(".learn-more-btn");if(!e)return;const t=e.dataset.id;if(!t){u('Не знайдено data-id на кнопці "Learn More"');return}ie(t)});class le{constructor(){this.formData={name:"",message:"",rating:null},this.validationRules={name:{min:2,max:16},message:{min:10,max:512},rating:{min:1,max:5}},this.init()}init(){this.bindElements(),this.bindEvents(),this.loadSavedData()}bindElements(){var e,t,r;this.modal=document.querySelector("[data-feedback-form]"),this.form=document.getElementById("feedback-form"),this.closeBtn=document.getElementById("close-feedback-btn"),this.nameInput=document.getElementById("user-name"),this.messageInput=document.getElementById("user-comment"),this.ratingContainer=document.getElementById("rating-container"),this.submitBtn=document.getElementById("submit-btn"),this.stars=((e=this.ratingContainer)==null?void 0:e.querySelectorAll("i.fa-star"))||[],this.errors={name:document.getElementById("name-error"),message:(t=this.form)==null?void 0:t.querySelector(".text-inva"),rating:(r=this.form)==null?void 0:r.querySelector(".rating-error")}}bindEvents(){var e,t,r,i;(e=this.closeBtn)==null||e.addEventListener("click",()=>this.closeModal()),(t=this.modal)==null||t.addEventListener("click",s=>this.handleBackdropClick(s)),document.addEventListener("keydown",s=>this.handleEscapeKey(s)),(r=this.form)==null||r.addEventListener("input",s=>this.handleInputChange(s)),(i=this.form)==null||i.addEventListener("submit",s=>this.handleSubmit(s)),this.stars.forEach((s,o)=>{s.addEventListener("click",()=>this.setRating(o+1)),s.addEventListener("mouseenter",()=>this.updateStarsDisplay(o+1,!0)),s.addEventListener("mouseleave",()=>this.updateStarsDisplay(this.formData.rating))})}removeListeners(){var e,t,r,i;(e=this.closeBtn)==null||e.removeEventListener("click",()=>this.closeModal()),(t=this.modal)==null||t.removeEventListener("click",s=>this.handleBackdropClick(s)),document.removeEventListener("keydown",s=>this.handleEscapeKey(s)),(r=this.form)==null||r.removeEventListener("input",s=>this.handleInputChange(s)),(i=this.form)==null||i.removeEventListener("submit",s=>this.handleSubmit(s)),this.stars.forEach((s,o)=>{s.removeEventListener("click",()=>this.setRating(o+1)),s.removeEventListener("mouseenter",()=>this.updateStarsDisplay(o+1,!0)),s.removeEventListener("mouseleave",()=>this.updateStarsDisplay(this.formData.rating))})}openModal(){this.modal&&(this.modal.classList.add("is-open"),document.body.style.overflow="hidden",setTimeout(()=>{var e;(e=this.nameInput)==null||e.focus()},100))}closeModal(){this.modal&&(this.modal.classList.remove("is-open"),document.body.style.overflow="",this.removeListeners(),this.clearSavedData())}handleBackdropClick(e){e.target===this.modal&&this.closeModal()}handleEscapeKey(e){var t;e.key==="Escape"&&((t=this.modal)!=null&&t.classList.contains("is-open"))&&this.closeModal()}handleInputChange(e){const{name:t,value:r}=e.target;switch(t){case"user-name":this.formData.name=r.trim(),this.validateField("name");break;case"user-comment":this.formData.message=r.trim(),this.validateField("message");break}this.saveData()}updateStarsDisplay(e,t=!1){this.stars.forEach((r,i)=>{r.classList.toggle("active",i<e),t?r.classList.toggle("hover",i<e):r.classList.remove("hover")})}setRating(e){e>=1&&e<=5&&(this.formData.rating=e,this.updateStarsDisplay(e),this.validateField("rating"),this.saveData())}validateField(e){const t=this.validationRules[e];if(!t)return!0;let r=!0;const i=this.formData[e];let s=null;e==="name"&&(s=this.nameInput),e==="message"&&(s=this.messageInput);const o=this.errors[e];if(!i||i.length<t.min||i.length>t.max?(s==null||s.classList.add("error"),o&&(o.style.display="block"),r=!1):(s==null||s.classList.remove("error"),o&&(o.style.display="none")),e==="rating"){const c=this.ratingContainer;!i||i<t.min||i>t.max?(c==null||c.classList.add("error"),o&&(o.style.display="block"),r=!1):(c==null||c.classList.remove("error"),o&&(o.style.display="none"))}return r}validateForm(){const e=[],{name:t,message:r,rating:i}=this.formData,s=this.validationRules;return(!t||t.length<s.name.min||t.length>s.name.max)&&e.push(`The name must be between ${s.name.min} and ${s.name.max} characters long.`),(!r||r.length<s.message.min||r.length>s.message.max)&&e.push(`The message must be between ${s.message.min} and ${s.message.max} characters long.`),(!i||i<s.rating.min||i>s.rating.max)&&e.push(`Please select a rating from ${s.rating.min} to ${s.rating.max} stars.`),e}async handleSubmit(e){e.preventDefault(),this.updateFormDataFromInputs();const t=this.validateForm();if(t.length>0){this.showErrorMessage(t.join(`
`));return}try{await this.submitForm()}catch(r){this.showErrorMessage(`Error sending feedback. ${r}.  Try again.`)}}updateFormDataFromInputs(){var e,t;this.formData.name=((e=this.nameInput)==null?void 0:e.value.trim())||"",this.formData.message=((t=this.messageInput)==null?void 0:t.value.trim())||""}async submitForm(){this.setSubmitButtonState(!0,"Feedback is sending...");try{await Q({name:this.formData.name,rating:this.formData.rating,descr:this.formData.message}),this.clearForm(),this.clearSavedData(),this.closeModal(),this.showSuccessMessage("Feadback was sent successfully!")}finally{this.setSubmitButtonState(!1,"Submit")}}setSubmitButtonState(e,t){this.submitBtn&&(this.submitBtn.disabled=e,this.submitBtn.textContent=t)}clearForm(){var e;(e=this.form)==null||e.reset(),this.formData={name:"",message:"",rating:null},this.updateStarsDisplay(0),this.clearErrorStates()}clearErrorStates(){var e,t,r;(e=this.nameInput)==null||e.classList.remove("error"),(t=this.messageInput)==null||t.classList.remove("error"),(r=this.ratingContainer)==null||r.classList.remove("error"),Object.values(this.errors).forEach(i=>i&&(i.style.display="none"))}showErrorMessage(e){u(e,"topRight")}showSuccessMessage(e){u(e,"topRight")}saveData(){this.formData.name===""&&this.formData.message===""&&this.formData.rating===null||localStorage.setItem("feedbackData",JSON.stringify(this.formData))}clearSavedData(){localStorage.removeItem("feedbackData")}loadSavedData(){const e=localStorage.getItem("feedbackData");if(e)try{this.formData=JSON.parse(e),this.nameInput.value=this.formData.name||"",this.messageInput.value=this.formData.message||"",this.updateStarsDisplay(this.formData.rating||0)}catch(t){console.warn("Error loading saved data:",t)}}}const ce=new le;function de(){ce.openModal()}const E=document.querySelectorAll(".form-str i");E.forEach((a,e)=>{a.addEventListener("click",()=>{E.forEach((t,r)=>{e>=r?t.classList.add("active"):t.classList.remove("active")})})});const S=document.getElementById("feedback-wrapper"),M=document.getElementById("pagination");let l;async function me(){Y();try{let e=(await d.get("https://sound-wave.b.goit.study/api/feedbacks",{params:{limit:3,page:1}})).data.data;for(e&&e.length>3&&(e=e.slice(0,3)),!e||e.length;e.length<3;)e.push({name:`Користувач ${e.length+1}`,descr:"Наразі немає додаткових відгуків для відображення.",rating:3});ue(e),fe(),ge()}catch(a){u(`Помилка при завантаженні відгуків ${a}`,"bottomCenter"),showErrorMessage()}K()}function ue(a){S.innerHTML="",a.forEach(e=>{const t=Math.round(e.rating),r=document.createElement("div");r.className="swiper-slide",r.innerHTML=`
            <div class="rating">
                ${he(t)}
            </div>
            <div class="text epilogue">"${e.descr}"</div>
            <div class="user">${e.name}</div>
        `,S.appendChild(r)})}function he(a){let e="";for(let t=1;t<=5;t++)t<=a?e+='<i class="fas fa-star star"></i>':e+='<i class="fas fa-star star-empty"></i>';return e}function fe(){l&&l.destroy(!0,!0),l=new N(".swiper-container",{loop:!1,slidesPerView:1,spaceBetween:0,grabCursor:!0,centeredSlides:!0,autoHeight:!0,speed:1e3,observer:!0,observeParents:!0,watchOverflow:!0,slidesOffsetBefore:0,slidesOffsetAfter:0,on:{slideChange:g,init:g}}),pe(3),g()}function pe(a){M.innerHTML="";for(let e=0;e<a;e++){const t=document.createElement("span");t.id=`pag-${e}`,t.addEventListener("click",()=>{l&&l.slideToLoop(e)}),M.appendChild(t)}}function ge(){document.getElementById("prevBtn").addEventListener("click",()=>{l&&l.slidePrev()}),document.getElementById("nextBtn").addEventListener("click",()=>{l&&l.slideNext()})}function g(){if(!l||l.slides.length===0)return;const a=l.realIndex,e=l.slides.length;document.querySelectorAll(".pagination span").forEach((t,r)=>{t.classList.toggle("active",r===a)}),a===0?prevBtn.classList.add("disabled"):prevBtn.classList.remove("disabled"),a===e-1?nextBtn.classList.add("disabled"):nextBtn.classList.remove("disabled")}document.addEventListener("DOMContentLoaded",me);const ve=document.getElementById("leave-feedbacks");ve.addEventListener("click",de);
//# sourceMappingURL=index.js.map
